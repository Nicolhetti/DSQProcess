## üìù Changelog ‚Äî Versi√≥n `v0.4.4` (2025-10-25)

### ‚ú® Nuevas funciones

* üóëÔ∏è **Limpieza Autom√°tica de Ejecutables**
  Los ejecutables de procesos falsos ahora se eliminan autom√°ticamente cuando los procesos terminan.

  * **Auto-eliminaci√≥n** - Archivos `.exe` removidos autom√°ticamente al finalizar proceso.
  * **Ahorro de espacio** - No se necesita limpieza manual de la carpeta `Games/`.
  * **Rastreo de rutas** - ProcessMonitor ahora rastrea las rutas de los ejecutables.
  * **Operaci√≥n silenciosa** - La limpieza ocurre en segundo plano sin intervenci√≥n del usuario.

* üîÑ **Sistema Mejorado de Actualizaci√≥n de Presets**
  Renovaci√≥n completa del mecanismo de actualizaci√≥n de presets para resolver problemas de l√≠mites de peticiones.

  * **API de GitHub Releases** - Usa Releases en lugar de archivos raw (no m√°s errores 429).
  * **Cach√© inteligente** - Verifica actualizaciones cada 6 horas autom√°ticamente.
  * **Control de versiones** - Versionado sem√°ntico apropiado para presets.
  * **Verificaci√≥n de hash** - Asegura integridad de archivos con validaci√≥n SHA-256.
  * **Protecci√≥n de timeout** - Timeout de 30 segundos previene congelamiento de la app.
  * **Sistema de respaldo** - Usa versi√≥n local si falla la remota.
  * **Workflow autom√°tico** - GitHub Actions auto-publica actualizaciones de presets.

---

### üõ†Ô∏è Mejoras

* **Rendimiento**: Reducci√≥n de llamadas a la API de GitHub con cach√© inteligente
  * TTL de cach√© de 6 horas balancea frescura y rendimiento
  * Opci√≥n de verificaci√≥n forzada disponible para verificaci√≥n manual
  * Metadata almacenada localmente en `presets_metadata.json`

* **Confiabilidad**: M√∫ltiples protecciones contra fallos de actualizaci√≥n
  * Protecci√≥n de timeout de red (10s para verificar versi√≥n, 30s para descarga)
  * Validaci√≥n de JSON antes de aplicar actualizaciones
  * Respaldo elegante a presets locales en caso de error
  * Header User-Agent para cumplir con mejores pr√°cticas de API de GitHub

* **Experiencia del Desarrollador**: Gesti√≥n m√°s f√°cil de presets
  * Workflow automatizado de GitHub Actions para publicaci√≥n
  * Documentaci√≥n clara para contribuir presets
  * Paso de validaci√≥n en pipeline CI/CD
  * Changelogs auto-generados para releases de presets

---

### üåê Traducciones

* No se requieren nuevas claves de traducci√≥n para esta versi√≥n
* Todos los mensajes usan claves existentes de versiones anteriores

---

### üêû Correcciones

* **L√≠mite de Peticiones**: Corregido error "429 Too Many Requests" al actualizar presets
  * Reemplazado acceso a archivos raw con API de GitHub Releases
  * Implementado cach√© para reducir llamadas a API
  * Agregada l√≥gica de reintento apropiada con backoff exponencial

* **Espacio en Disco**: Corregida acumulaci√≥n de ejecutables falsos en carpeta Games/
  * Limpieza autom√°tica cuando los procesos terminan
  * ProcessMonitor rastrea y elimina archivos hu√©rfanos
  * Implementaci√≥n eficiente en memoria con Arc<Mutex>

* **Verificaci√≥n de Actualizaciones**: Mejorada confiabilidad de detecci√≥n de versi√≥n de presets
  * Mejor manejo de errores para fallos de red
  * Validaci√≥n de cach√© basada en timestamp
  * Separadas verificaciones forzadas de autom√°ticas

---

### üîß Cambios T√©cnicos

* **Cambios Core**:
  * Modificada estructura `ProcessInfo` para incluir `exe_path: PathBuf`
  * Actualizada funci√≥n `create_fake_process()` para retornar tupla `(u32, PathBuf)`
  * Mejorada funci√≥n `check_and_remove_dead_processes()` para eliminar ejecutables
  * Agregado m√©todo `add_process()` con par√°metro de ruta

* **Sistema de Presets**:
  * Nuevo archivo: `presets_metadata.json` para rastreo de versiones
  * Agregada estructura `PresetsMetadata` con version/timestamp/hash
  * Implementada funci√≥n `force_check_updates()` para verificaci√≥n manual
  * Agregada funci√≥n `is_cache_expired()` para validaci√≥n de TTL
  * Creada funci√≥n `calculate_hash()` para verificaciones de integridad
  * Actualizada funci√≥n `update_presets_file()` para usar API de Releases

* **Integraci√≥n con GitHub**:
  * Nuevo workflow: `.github/workflows/update-presets.yml`
  * Validaci√≥n automatizada de presets con `jq`
  * Versionado auto-incremental basado en commits
  * Creaci√≥n/actualizaci√≥n de releases con gesti√≥n apropiada de assets

* **Constantes**:
  * `CACHE_TTL_SECONDS`: 21600 (6 horas)
  * `GITHUB_API_URL`: Apunta a `/releases/tags/presets`
  * Valores de timeout: 10s (verificaci√≥n), 30s (descarga)

---

### üìö Documentaci√≥n

* Agregado `PRESETS_RELEASE_GUIDE.md` - Gu√≠a para publicar actualizaciones de presets
* Agregado `PRESETS_UPDATE_SYSTEM.md` - Documentaci√≥n t√©cnica del nuevo sistema
* Actualizados workflows con generaci√≥n autom√°tica de changelog
* Incluida secci√≥n de troubleshooting para problemas comunes

---

### üîÑ Notas de Migraci√≥n

**Para Usuarios:**
- No se requiere acci√≥n - actualiza autom√°ticamente en la pr√≥xima verificaci√≥n
- El antiguo `presets.json` permanece compatible
- Nuevo `presets_metadata.json` creado autom√°ticamente

**Para Contribuidores:**
- Usar nuevo workflow para env√≠o de presets
- Seguir gu√≠as de versionado sem√°ntico
- Probar validez de JSON antes de enviar PRs

---

### ‚ö†Ô∏è Cambios que Rompen Compatibilidad

Ninguno - totalmente compatible con v0.4.3

---

## üìù Changelog ‚Äî Versi√≥n `v0.4.3` (2025-10-21)

### ‚ú® Nuevas funciones

* üéØ **Prefijo Autom√°tico Games/ en Rutas**
  Gesti√≥n simplificada de rutas para procesos falsos.

  * **Prefijo autom√°tico** - Solo escribe `Fortnite/Win64` en lugar de `Games/Fortnite/Win64`.
  * **Vista previa visual** - Muestra la ruta completa `üìÅ Games/...` antes de crear el proceso.
  * **Compatible con rutas anteriores** - Sigue aceptando rutas completas con prefijo `Games/`.
  * **Presets actualizados** - Todos los presets oficiales ahora usan rutas simplificadas.

* üîÑ **Reseteo Autom√°tico de Rich Presence**
  Rich Presence ahora se actualiza autom√°ticamente cuando terminan los procesos falsos.

  * **Monitoreo de procesos** - Rastrea todos los procesos falsos en ejecuci√≥n.
  * **Auto-reseteo a "Esperando..."** - Rich Presence se limpia cuando el proceso se cierra.
  * **Sin intervenci√≥n manual** - Todo ocurre autom√°ticamente en segundo plano.
  * **Verificaciones optimizadas** - Verifica el estado del proceso cada 2 segundos.

---

### üõ†Ô∏è Mejoras

* **Gesti√≥n de Rutas**: Experiencia de usuario simplificada con prefijo autom√°tico `Games/`
  * Los usuarios solo necesitan especificar rutas relativas desde la carpeta Games
  * Ruta completa mostrada como confirmaci√≥n visual antes de la ejecuci√≥n
  * Definiciones de presets m√°s limpias sin prefijo repetitivo `Games/`

* **Ciclo de Vida de Rich Presence**: Automatizaci√≥n completa de actualizaciones de presencia en Discord
  * Monitoreo inteligente de procesos generados
  * Limpieza autom√°tica cuando los procesos terminan
  * Mejor sincronizaci√≥n entre el estado de la app y el estado de Discord

---

### üêû Correcciones

* **Persistencia de Rich Presence**: Corregido problema donde Rich Presence no se reseteaba despu√©s de cerrar el proceso falso
  * Implementado sistema `ProcessMonitor` para rastrear procesos activos
  * Agregadas verificaciones peri√≥dicas para detectar procesos terminados
  * Rich Presence ahora regresa correctamente al estado "Esperando..."

---

### üîß Cambios T√©cnicos

* Agregada estructura `ProcessMonitor` para gestionar ciclos de vida de procesos falsos
* Implementado sistema de rastreo de PIDs usando la crate `sysinfo`
* Mejorada funci√≥n `create_fake_process()` para retornar ID del proceso
* Agregado m√©todo `check_dead_processes()` con intervalo de verificaci√≥n de 2 segundos
* Actualizados todos los presets para usar formato de ruta simplificado
* Modificado `process.rs` para agregar autom√°ticamente `Games/` a rutas relativas

---

## üìù Changelog ‚Äî Versi√≥n `v0.4.2` (2025-10-11)

### ‚ú® Nuevas funciones

* üéØ **Gesti√≥n de Presets Personalizados**
  Sistema completo para gestionar presets personalizados directamente desde la interfaz.

  * **Agregar presets personalizados** sin editar archivos JSON manualmente.
  * **Editar presets existentes** - modifica nombre, ejecutable o ruta.
  * **Eliminar presets personalizados** con di√°logo de confirmaci√≥n.
  * **Distinci√≥n visual** - presets personalizados marcados con √≠cono ‚≠ê.
  * **Almacenamiento separado** - presets personalizados guardados en `presets_custom.json`.

* üîí **Actualizaciones Seguras de Presets**
  Las actualizaciones de presets desde GitHub ahora preservan los presets creados por el usuario.

  * **Sistema de archivos dual** - presets oficiales en `presets.json`, personalizados en `presets_custom.json`.
  * **Presets personalizados protegidos** - actualizar desde GitHub solo afecta los presets oficiales.
  * **Sin p√©rdida de datos** - tus presets personalizados permanecen intactos durante actualizaciones.

---

### üõ†Ô∏è Mejoras

* **Optimizaci√≥n de Rendimiento**: Mejoras masivas de rendimiento en la pesta√±a Principal
  * **Cache de detecci√≥n de Discord** - verifica solo cada 5 segundos en lugar de cada frame.
  * **Animaciones reducidas** - respuesta de interfaz m√°s r√°pida y suave.
  * **Eliminaci√≥n de trompicones** - arrastrar ventana e interacci√≥n ahora completamente fluidos.
  * **Invalidaci√≥n inteligente** - cache se actualiza inmediatamente cuando es necesario (ej: abrir Discord).

* **Mejor UX**: Flujo de trabajo mejorado para gesti√≥n de presets
  * **Di√°logos intuitivos** - formularios claros para agregar/editar presets.
  * **Prevenci√≥n de duplicados** - valida nombres de presets antes de guardar.
  * **Di√°logos de confirmaci√≥n** - previene eliminaci√≥n accidental.
  * **Manejo de errores** - retroalimentaci√≥n clara para entradas inv√°lidas.

---

### üåê Traducciones

* Agregadas nuevas claves de traducci√≥n para gesti√≥n de presets:
  * `"add_preset"`, `"add_preset_title"`, `"edit_preset"`, `"edit_preset_title"`
  * `"delete_preset"`, `"delete_preset_title"`, `"delete_preset_confirm"`
  * `"preset_name"`, `"save_preset"`, `"delete"`, `"cancel"`
  * `"preset_fields_empty"`, `"preset_added_success"`, `"preset_edited_success"`, `"preset_deleted_success"`

---

### üêû Correcciones

* **Problemas de Rendimiento**: Corregidos problemas severos de rendimiento en pesta√±a Principal
  * Eliminadas verificaciones constantes de procesos de Discord que causaban stuttering en UI
  * Reducidas llamadas innecesarias al sistema durante renderizado
  * Corregidas interacciones lentas con botones y campos de texto

* **Gesti√≥n de Presets**: Confiabilidad mejorada
  * Mejores mensajes de error para datos de preset inv√°lidos
  * Corregidas posibles condiciones de carrera al guardar presets
  * Mejorado manejo de archivos para presets personalizados

---

### üîß Cambios T√©cnicos

* Agregado `presets_custom.json` para presets creados por usuarios
* Implementado sistema de cache con `std::time::Instant` para verificaciones de Discord
* Mejorada estructura `Preset` con campo `is_custom`
* Nuevas funciones de gesti√≥n de presets: `add_preset()`, `edit_custom_preset()`, `delete_custom_preset()`
* Optimizado tiempo de animaciones de egui para mejor capacidad de respuesta
* Agregado sistema de invalidaci√≥n de cache para actualizaciones inmediatas cuando sea necesario

---

## üìù Changelog ‚Äî Versi√≥n `v0.4.1` (2025-09-20)

### üõ†Ô∏è Mejoras

* **Arquitectura de C√≥digo**: Modularizaci√≥n completa de la UI para mejor mantenibilidad
  * Dividido `src/app/ui.rs` en m√≥dulos separados: `main_tab.rs`, `settings_tab.rs`, `about_tab.rs`
  * Agregado m√≥dulo `components.rs` para componentes UI reutilizables
  * **Mejor organizaci√≥n del c√≥digo** con m√≥dulos enfocados y de responsabilidad √∫nica
  * **Mejor escalabilidad** - m√°s f√°cil agregar nuevas pesta√±as y componentes
  * **Mantenibilidad mejorada** - archivos m√°s peque√±os y enfocados

---

### üîß Cambios T√©cnicos

* Reorganizada estructura de UI de archivo monol√≠tico a arquitectura modular:
  ```
  src/app/ui/
  ‚îú‚îÄ‚îÄ main_tab.rs      - L√≥gica y componentes de la pesta√±a Principal
  ‚îú‚îÄ‚îÄ settings_tab.rs  - L√≥gica y componentes de la pesta√±a Configuraciones
  ‚îú‚îÄ‚îÄ about_tab.rs     - L√≥gica y componentes de la pesta√±a Sobre
  ‚îî‚îÄ‚îÄ components.rs    - Componentes UI reutilizables
  ```
* **Sin cambios que rompan compatibilidad** - toda la funcionalidad permanece id√©ntica
* **Mejor experiencia del desarrollador** con base de c√≥digo m√°s limpia y navegable

---

## üìù Changelog ‚Äî Versi√≥n `v0.4.0` (2025-09-17)

### ‚ú® Nuevas funciones

* üéÆ **Integraci√≥n con Discord Rich Presence**
  ¬°DSQProcess ahora muestra tu actividad de juego simulado en Discord!

  * Muestra **"Jugando [Nombre del Juego]"** en tu perfil de Discord en lugar de nombres de ejecutables.
  * Indica el **tiempo transcurrido** desde que se inici√≥ DSQProcess.
  * **Opci√≥n de activaci√≥n** en Configuraciones para habilitar/deshabilitar Rich Presence (habilitado por defecto).
  * **Detecci√≥n inteligente de nombres** - muestra "Borderlands 4" en lugar de "Borderlands4.exe".

* üîç **Verificaci√≥n Manual de Presets**
  Verifica actualizaciones de presets sin reiniciar la aplicaci√≥n.

  * Agregado bot√≥n **"Verificar Presets"** en la pesta√±a Principal.
  * Verificaci√≥n instant√°nea de archivos locales vs. remotos de presets.
  * **Confirmaci√≥n de estado** cuando los presets est√°n actualizados.

* üé® **Interfaz de Usuario Mejorada**
  Interfaz completamente redise√±ada con mejor organizaci√≥n y centrado.

  * **Elementos centrados** - pesta√±as, botones y controles ahora correctamente alineados.
  * **Secciones agrupadas** con tarjetas visuales para mejor organizaci√≥n.
  * **Espaciado consistente** y dise√±o profesional en toda la aplicaci√≥n.
  * **Iconos agregados** a botones y secciones para mejor retroalimentaci√≥n visual.

---

### üõ†Ô∏è Mejoras

* **Arquitectura de C√≥digo**: Sistema de Rich Presence organizado en m√≥dulos dedicados (`src/shared/richpresence/`).
* **Rendimiento de UI**: Renderizado optimizado con mejor gesti√≥n de widgets.
* **Manejo de Errores**: Mensajes de error mejorados y retroalimentaci√≥n de estado para Rich Presence.
* **Persistencia de Configuraciones**: Preferencias de Rich Presence guardadas en la configuraci√≥n.

---

### üåê Traducciones

* Agregadas nuevas claves de traducci√≥n para Rich Presence y mejoras de UI:
  * `"enable_rich_presence"`, `"rich_presence_connected"`, `"rich_presence_disconnected"`
  * `"rich_presence_error"`, `"check_presets"`, `"presets_up_to_date"`

---

### üêû Correcciones

* **Problemas de Centrado**: Corregidas pesta√±as, combo boxes y botones desalineados.
* **Borrow Checker**: Resueltos errores de compilaci√≥n de Rust relacionados con pr√©stamos mutables/inmutables.
* **Detecci√≥n de Presets**: Mejorada extracci√≥n de nombres de juegos desde presets para Rich Presence.
* **Gesti√≥n de Memoria**: Mejor limpieza de conexiones de Rich Presence al cerrar la aplicaci√≥n.

---

### üîß Cambios T√©cnicos

* Actualizadas dependencias en `Cargo.toml` para incluir `discord-rich-presence = "1.0.0"`.
* Mejorada estructura `Config` para incluir campo `rich_presence_enabled`.
* Mejor gesti√≥n del estado de la aplicaci√≥n con `RichPresenceManager`.
* Mejor manejo de errores para fallos de conexi√≥n Discord IPC.

---

## üìù Changelog ‚Äî Versi√≥n `v0.3.0` (2025-07-03)

### ‚ú® Nuevas funciones

* üîÅ **Actualizaci√≥n remota de presets**
  Ahora los presets se pueden mantener actualizados comparando autom√°ticamente tu archivo local con el del repositorio oficial.

  * Se agrega un bot√≥n para **actualizar el archivo `presets.json`** directamente desde GitHub.
  * Se muestra una advertencia si tu archivo local est√° desactualizado.

* üõ°Ô∏è **Detecci√≥n de Discord en ejecuci√≥n**
  DSQProcess ahora verifica si **Discord, Discord PTB o Canary** est√°n abiertos.

  * Si no est√°n activos, se muestra un mensaje de advertencia.
  * Si hay versiones instaladas, se ofrecen botones para abrirlas directamente desde la app.

* üß≠ **Interfaz organizada con pesta√±as**
  Se reorganiz√≥ la UI principal con un sistema de pesta√±as:

  * **Principal:** configuraci√≥n del proceso falso.
  * **Configuraciones:** selector de idioma y ajustes futuros.
  * **Sobre:** versi√≥n actual, verificaci√≥n de actualizaciones y cr√©ditos.

---

### üõ†Ô∏è Mejoras

* Reorganizaci√≥n del c√≥digo en **m√≥dulos y subcomponentes** para facilitar el mantenimiento.
* La app **recuerda la √∫ltima configuraci√≥n** gracias al sistema de persistencia (`config.json`).
* Reestructuraci√≥n de los textos para soportar traducciones en pesta√±as y nuevos mensajes.

---

### üåê Traducciones

* Se a√±adieron nuevas claves al sistema de traducci√≥n multilenguaje:

  * `"discord_not_running"`, `"start_discord_prompt"`, `"discord_not_installed"`, `"tab_main"`, `"tab_settings"`, `"tab_about"`

---

### üêû Correcciones

* Corregido un bug donde la pesta√±a siempre volv√≠a a "Principal" al intentar cambiar.
* Se mejor√≥ la estabilidad al comparar archivos locales y remotos en la verificaci√≥n de presets.

---
